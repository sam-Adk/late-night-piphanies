<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Late Night Epiphanies — Art Shop</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&family=DM+Sans:wght@300;400;500&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --ink: #0a0806;
      --deep: #111009;
      --surface: #181610;
      --panel: #1e1c14;
      --border: rgba(255,245,220,0.08);
      --border-bright: rgba(255,245,220,0.18);
      --gold: #c9a84c;
      --gold-light: #e8c97b;
      --gold-pale: rgba(201,168,76,0.12);
      --cream: #f5ede0;
      --muted: #8a836f;
      --text: #e8dcc8;
      --white: #faf6ef;
      --danger: #c94c4c;
      --success: #4caf76;
      --r: 16px;
      --r-lg: 24px;
      --shadow: 0 20px 60px rgba(0,0,0,0.7);
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    html, body { width: 100%; max-width: 100%; overflow-x: hidden; }
    body {
      font-family: 'DM Sans', sans-serif;
      background: var(--ink);
      color: var(--text);
      min-height: 100vh;
    }

    /* GRAIN OVERLAY */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: 0.035;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      background-size: 180px 180px;
    }

    /* CURSOR */
    body { cursor: crosshair; }
    button, a, [data-action] { cursor: pointer; }

    .container { max-width: 1320px; margin: 0 auto; padding: 0 40px; }
    @media (max-width: 640px) { .container { padding: 0 20px; } }

    /* ===== NAVBAR ===== */
    .nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 100;
      height: 72px;
      display: flex;
      align-items: center;
      padding: 0 40px;
      background: rgba(10,8,6,0.85);
      backdrop-filter: blur(20px) saturate(150%);
      border-bottom: 1px solid var(--border);
      transition: all 0.4s ease;
    }
    .nav.scrolled {
      height: 60px;
      background: rgba(10,8,6,0.97);
    }
    .nav-inner {
      width: 100%;
      max-width: 1320px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
    }
    .brand {
      display: flex;
      flex-direction: column;
      gap: 2px;
      text-decoration: none;
    }
    .brand-logo {
      font-family: 'Cinzel', serif;
      font-size: 17px;
      font-weight: 600;
      letter-spacing: 0.12em;
      color: var(--gold-light);
      white-space: nowrap;
    }
    .brand-sub {
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .nav-center {
      display: flex;
      gap: 32px;
      align-items: center;
    }
    @media (max-width: 768px) { .nav-center { display: none; } }
    .nav-link {
      font-size: 12px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--muted);
      text-decoration: none;
      transition: color 0.2s;
      border: none;
      background: none;
      padding: 0;
    }
    .nav-link:hover { color: var(--cream); }
    .nav-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .icon-btn {
      width: 42px; height: 42px;
      display: flex; align-items: center; justify-content: center;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }
    .icon-btn:hover {
      border-color: var(--gold);
      color: var(--gold);
      background: var(--gold-pale);
    }
    .cart-badge {
      position: absolute;
      top: -4px; right: -4px;
      min-width: 18px; height: 18px;
      border-radius: 999px;
      background: var(--gold);
      color: var(--ink);
      font-size: 10px;
      font-weight: 700;
      display: flex; align-items: center; justify-content: center;
      padding: 0 4px;
      opacity: 0;
      transform: scale(0.5);
      transition: all 0.25s cubic-bezier(0.34,1.56,0.64,1);
    }
    .cart-badge.visible {
      opacity: 1;
      transform: scale(1);
    }
    .pill-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      border: 1px solid var(--gold);
      background: transparent;
      color: var(--gold);
      cursor: pointer;
      transition: all 0.25s ease;
      text-decoration: none;
      white-space: nowrap;
    }
    .pill-btn:hover {
      background: var(--gold);
      color: var(--ink);
      box-shadow: 0 0 24px rgba(201,168,76,0.3);
    }

    /* ===== HERO ===== */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
      padding-top: 72px;
    }
    .hero-bg {
      position: absolute;
      inset: 0;
      z-index: 0;
    }
    .hero-bg-glow {
      position: absolute;
      width: 700px; height: 700px;
      border-radius: 50%;
      filter: blur(120px);
      opacity: 0.18;
    }
    .hero-bg-glow.g1 {
      background: radial-gradient(circle, #c9a84c, transparent 70%);
      top: -200px; right: -100px;
      animation: driftA 12s ease-in-out infinite alternate;
    }
    .hero-bg-glow.g2 {
      background: radial-gradient(circle, #4c6ac9, transparent 70%);
      bottom: -200px; left: -100px;
      animation: driftB 16s ease-in-out infinite alternate;
    }
    @keyframes driftA { from { transform: translate(0,0); } to { transform: translate(40px,60px); } }
    @keyframes driftB { from { transform: translate(0,0); } to { transform: translate(-40px,-40px); } }
    .hero-lines {
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(255,245,200,0.025) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,245,200,0.025) 1px, transparent 1px);
      background-size: 80px 80px;
    }
    .hero-inner {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: 1fr 1fr;
      align-items: center;
      gap: 80px;
      width: 100%;
      max-width: 1320px;
      margin: 0 auto;
      padding: 60px 40px;
    }
    @media (max-width: 900px) {
      .hero-inner { grid-template-columns: 1fr; gap: 40px; padding: 40px 20px; }
    }
    .hero-eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 11px;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 24px;
    }
    .hero-eyebrow::before {
      content: '';
      display: block;
      width: 40px;
      height: 1px;
      background: var(--gold);
    }
    .hero h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(52px, 7vw, 96px);
      font-weight: 300;
      line-height: 0.95;
      letter-spacing: -0.02em;
      color: var(--white);
      margin-bottom: 28px;
    }
    .hero h1 em {
      font-style: italic;
      color: var(--gold-light);
    }
    .hero-desc {
      font-size: 15px;
      line-height: 1.7;
      color: var(--muted);
      max-width: 420px;
      margin-bottom: 40px;
    }
    .hero-cta {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }
    .btn-gold {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 14px 32px;
      background: var(--gold);
      color: var(--ink);
      border: none;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.25s ease;
      text-decoration: none;
    }
    .btn-gold:hover {
      background: var(--gold-light);
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(201,168,76,0.3);
    }
    .btn-outline {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 13px 28px;
      background: transparent;
      color: var(--cream);
      border: 1px solid var(--border-bright);
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.25s ease;
      text-decoration: none;
    }
    .btn-outline:hover {
      border-color: var(--gold);
      color: var(--gold);
    }
    .hero-visual {
      position: relative;
    }
    .hero-frame {
      position: relative;
      aspect-ratio: 3/4;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 40px 100px rgba(0,0,0,0.8), 0 0 0 1px rgba(255,245,200,0.1);
    }
    .hero-frame img {
      width: 100%; height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 8s ease;
    }
    .hero-frame:hover img { transform: scale(1.04); }
    .hero-frame-border {
      position: absolute;
      inset: -16px;
      border: 1px solid rgba(201,168,76,0.2);
      border-radius: 4px;
      pointer-events: none;
    }
    .hero-frame-number {
      position: absolute;
      bottom: 24px;
      left: 24px;
      font-family: 'Cinzel', serif;
      font-size: 11px;
      letter-spacing: 0.2em;
      color: rgba(255,245,200,0.6);
      background: rgba(10,8,6,0.7);
      padding: 6px 12px;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,245,200,0.08);
      border-radius: 2px;
    }
    .hero-stats {
      position: absolute;
      right: -20px;
      top: 40px;
      display: flex;
      flex-direction: column;
      gap: 1px;
    }
    @media (max-width: 900px) { .hero-stats { display: none; } }
    .stat-pill {
      background: rgba(14,12,9,0.95);
      border: 1px solid var(--border);
      padding: 12px 18px;
      border-radius: 4px;
      backdrop-filter: blur(12px);
    }
    .stat-pill .stat-num {
      font-family: 'Cormorant Garamond', serif;
      font-size: 28px;
      font-weight: 600;
      color: var(--gold-light);
      line-height: 1;
    }
    .stat-pill .stat-label {
      font-size: 10px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--muted);
      margin-top: 2px;
    }

    /* ===== MARQUEE STRIP ===== */
    .marquee-strip {
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
      background: var(--deep);
      padding: 14px 0;
      overflow: hidden;
      position: relative;
      z-index: 1;
    }
    .marquee-inner {
      display: flex;
      gap: 60px;
      animation: scrollX 30s linear infinite;
      white-space: nowrap;
      width: max-content;
    }
    .marquee-inner span {
      font-family: 'Cinzel', serif;
      font-size: 11px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .marquee-inner .dot {
      color: var(--gold);
      font-size: 14px;
    }
    @keyframes scrollX {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }

    /* ===== SECTION HEADERS ===== */
    .section-header {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 48px;
      flex-wrap: wrap;
    }
    .section-eyebrow {
      font-size: 10px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--gold);
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .section-eyebrow::before {
      content: '';
      width: 24px; height: 1px;
      background: var(--gold);
    }
    .section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(36px, 5vw, 64px);
      font-weight: 300;
      color: var(--white);
      line-height: 1;
      letter-spacing: -0.01em;
    }
    .section-title em { font-style: italic; color: var(--gold-light); }

    /* ===== FILTER BAR ===== */
    .filter-section {
      padding: 80px 0 0;
      position: relative;
      z-index: 1;
    }
    .filter-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 40px;
    }
    .filter-label {
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
      padding-right: 12px;
      border-right: 1px solid var(--border-bright);
    }
    .filter-chip {
      padding: 8px 18px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      border-radius: 2px;
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.1em;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-chip:hover { border-color: var(--border-bright); color: var(--cream); }
    .filter-chip.active {
      background: var(--gold-pale);
      border-color: var(--gold);
      color: var(--gold-light);
    }
    .filter-spacer { flex: 1; }
    .search-field {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 2px;
      padding: 10px 14px;
      min-width: 240px;
      transition: border-color 0.2s;
    }
    .search-field:focus-within { border-color: var(--gold); }
    .search-field input {
      background: transparent;
      border: none;
      outline: none;
      color: var(--text);
      font-size: 13px;
      font-family: 'DM Sans', sans-serif;
      width: 100%;
    }
    .search-field input::placeholder { color: var(--muted); }
    .sort-select {
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 2px;
      padding: 10px 14px;
      font-size: 13px;
      font-family: 'DM Sans', sans-serif;
      outline: none;
      cursor: pointer;
      appearance: none;
      padding-right: 32px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%238a836f' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
    }

    /* ===== GALLERY MASONRY ===== */
    .gallery {
      columns: 3;
      column-gap: 24px;
      padding-bottom: 80px;
    }
    @media (max-width: 1000px) { .gallery { columns: 2; } }
    @media (max-width: 600px) { .gallery { columns: 1; } }

    .art-card {
      break-inside: avoid;
      margin-bottom: 24px;
      position: relative;
      border-radius: 4px;
      overflow: hidden;
      background: var(--surface);
      border: 1px solid var(--border);
      transition: all 0.4s cubic-bezier(0.25,0.46,0.45,0.94);
      cursor: pointer;
    }
    .art-card:hover {
      border-color: rgba(201,168,76,0.3);
      transform: translateY(-4px);
      box-shadow: 0 30px 80px rgba(0,0,0,0.6), 0 0 0 1px rgba(201,168,76,0.1);
    }
    .art-card.sold {
      opacity: 0.5;
      pointer-events: none;
    }
    .art-img-wrap {
      position: relative;
      overflow: hidden;
    }
    .art-img-wrap img {
      width: 100%;
      display: block;
      transition: transform 0.7s cubic-bezier(0.25,0.46,0.45,0.94);
    }
    .art-card:hover .art-img-wrap img { transform: scale(1.06); }
    .art-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to top,
        rgba(10,8,6,0.95) 0%,
        rgba(10,8,6,0.4) 40%,
        transparent 70%
      );
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 20px;
      gap: 10px;
    }
    .art-card:hover .art-overlay { opacity: 1; }
    .overlay-btns {
      display: flex;
      gap: 8px;
    }
    .overlay-btn {
      flex: 1;
      padding: 10px;
      border-radius: 2px;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      text-align: center;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }
    .overlay-btn.primary {
      background: var(--gold);
      color: var(--ink);
    }
    .overlay-btn.primary:hover { background: var(--gold-light); }
    .overlay-btn.secondary {
      background: rgba(255,245,200,0.08);
      color: var(--cream);
      border: 1px solid rgba(255,245,200,0.15);
    }
    .overlay-btn.secondary:hover { border-color: var(--gold); color: var(--gold); }
    .overlay-btn.bid-btn {
      background: transparent;
      color: var(--gold);
      border: 1px solid var(--gold);
      flex: none;
      padding: 10px 14px;
    }
    .overlay-btn.bid-btn:hover { background: var(--gold-pale); }
    .art-cat-badge {
      position: absolute;
      top: 14px;
      left: 14px;
      background: rgba(10,8,6,0.8);
      border: 1px solid rgba(201,168,76,0.3);
      color: var(--gold);
      font-size: 10px;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      padding: 5px 10px;
      border-radius: 2px;
      backdrop-filter: blur(8px);
    }
    .sold-banner {
      position: absolute;
      top: 14px;
      right: 14px;
      background: var(--danger);
      color: white;
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      padding: 6px 12px;
      border-radius: 2px;
      transform: rotate(3deg);
    }
    .art-card-body {
      padding: 16px 18px 18px;
      background: var(--surface);
    }
    .art-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 20px;
      font-weight: 400;
      color: var(--white);
      margin-bottom: 4px;
      letter-spacing: 0.01em;
    }
    .art-tags {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.1em;
      margin-bottom: 10px;
    }
    .art-price-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .art-price {
      font-family: 'Cormorant Garamond', serif;
      font-size: 22px;
      font-weight: 600;
      color: var(--gold-light);
    }
    .art-price small {
      font-family: 'DM Sans', sans-serif;
      font-size: 11px;
      color: var(--muted);
      margin-left: 4px;
    }

    /* ===== QUICK VIEW MODAL ===== */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(5,4,3,0.85);
      z-index: 200;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      backdrop-filter: blur(8px) saturate(50%);
    }
    .modal-backdrop.open { display: flex; }
    .modal {
      background: var(--surface);
      border: 1px solid var(--border-bright);
      border-radius: 4px;
      width: min(100%, 1000px);
      max-height: 90vh;
      overflow: hidden auto;
      position: relative;
      box-shadow: 0 40px 120px rgba(0,0,0,0.9);
      animation: modalIn 0.35s cubic-bezier(0.34,1.2,0.64,1);
    }
    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.96) translateY(20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .modal-close {
      position: absolute;
      top: 16px; right: 16px;
      width: 36px; height: 36px;
      display: flex; align-items: center; justify-content: center;
      background: rgba(255,245,200,0.06);
      border: 1px solid var(--border);
      border-radius: 50%;
      color: var(--muted);
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
      transition: all 0.2s;
      z-index: 10;
    }
    .modal-close:hover { color: var(--cream); border-color: var(--border-bright); }
    .modal-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width: 700px) { .modal-grid { grid-template-columns: 1fr; } }
    .modal-img-panel {
      aspect-ratio: 4/5;
      overflow: hidden;
    }
    .modal-img-panel img {
      width: 100%; height: 100%;
      object-fit: cover;
      display: block;
    }
    .modal-info {
      padding: 36px 32px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      overflow-y: auto;
    }
    .modal-cat {
      font-size: 10px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--gold);
    }
    .modal-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 38px;
      font-weight: 300;
      color: var(--white);
      line-height: 1;
      letter-spacing: -0.01em;
    }
    .modal-desc {
      font-size: 14px;
      line-height: 1.7;
      color: var(--muted);
      border-top: 1px solid var(--border);
      padding-top: 16px;
    }
    .opt-label {
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 10px;
    }
    .opt-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .opt-chip {
      padding: 9px 16px;
      border: 1px solid var(--border-bright);
      background: transparent;
      color: var(--text);
      border-radius: 2px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .opt-chip.active {
      background: var(--gold-pale);
      border-color: var(--gold);
      color: var(--gold-light);
    }
    .opt-chip:hover:not(.active) { border-color: rgba(255,245,200,0.3); }
    .modal-price {
      font-family: 'Cormorant Garamond', serif;
      font-size: 42px;
      font-weight: 300;
      color: var(--gold-light);
      letter-spacing: -0.02em;
    }
    .modal-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .modal-actions .btn-gold { flex: 1; justify-content: center; }
    .btn-wish {
      width: 46px; height: 46px;
      display: flex; align-items: center; justify-content: center;
      border: 1px solid var(--border-bright);
      background: transparent;
      color: var(--muted);
      border-radius: 2px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-wish:hover, .btn-wish.active { border-color: #c94c4c; color: #c94c4c; }

    /* ===== CART DRAWER ===== */
    .cart-drawer {
      position: fixed;
      top: 0; right: 0;
      width: min(440px, 100%);
      height: 100vh;
      background: var(--deep);
      border-left: 1px solid var(--border);
      z-index: 300;
      transform: translateX(110%);
      transition: transform 0.4s cubic-bezier(0.25,0.46,0.45,0.94);
      display: flex;
      flex-direction: column;
      box-shadow: -20px 0 60px rgba(0,0,0,0.5);
    }
    .cart-drawer.open { transform: translateX(0); }
    .drawer-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(5,4,3,0.7);
      z-index: 299;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s;
      backdrop-filter: blur(4px);
    }
    .drawer-backdrop.open { opacity: 1; pointer-events: all; }
    .cart-header {
      padding: 24px 24px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .cart-header h2 {
      font-family: 'Cinzel', serif;
      font-size: 14px;
      letter-spacing: 0.2em;
      color: var(--gold-light);
    }
    .cart-body {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .empty-cart {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 12px;
      color: var(--muted);
      font-size: 14px;
      text-align: center;
    }
    .empty-cart svg { opacity: 0.3; }
    .cart-item {
      display: grid;
      grid-template-columns: 70px 1fr auto;
      gap: 14px;
      align-items: center;
      padding: 14px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 4px;
    }
    .cart-item img {
      width: 70px; height: 70px;
      object-fit: cover;
      border-radius: 2px;
      display: block;
    }
    .cart-item-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 17px;
      color: var(--white);
      margin-bottom: 3px;
    }
    .cart-item-meta {
      font-size: 11px;
      color: var(--muted);
      letter-spacing: 0.05em;
      margin-bottom: 6px;
    }
    .cart-item-price {
      font-size: 14px;
      font-weight: 600;
      color: var(--gold);
    }
    .qty-control {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
    }
    .qty-btn {
      width: 28px; height: 28px;
      display: flex; align-items: center; justify-content: center;
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--muted);
      border-radius: 2px;
      cursor: pointer;
      font-size: 16px;
      line-height: 1;
      transition: all 0.15s;
    }
    .qty-btn:hover { border-color: var(--gold); color: var(--gold); }
    .qty-num {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
    }
    .cart-footer {
      padding: 20px;
      border-top: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .cart-total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cart-total-label {
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .cart-total-value {
      font-family: 'Cormorant Garamond', serif;
      font-size: 28px;
      color: var(--gold-light);
    }
    .btn-full { width: 100%; justify-content: center; }
    .btn-mpesa {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px;
      background: #00B140;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-mpesa:hover { background: #00c84a; box-shadow: 0 8px 24px rgba(0,177,64,0.3); }
    .cart-note {
      font-size: 11px;
      color: var(--muted);
      text-align: center;
      letter-spacing: 0.05em;
    }

    /* ===== BID MODAL ===== */
    .bid-modal-wrap {
      position: fixed;
      inset: 0;
      z-index: 400;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: rgba(5,4,3,0.85);
      backdrop-filter: blur(8px);
    }
    .bid-modal-wrap.open { display: flex; }
    .bid-box {
      background: var(--surface);
      border: 1px solid var(--border-bright);
      border-radius: 4px;
      padding: 36px;
      width: min(100%, 380px);
      animation: modalIn 0.3s ease;
    }
    .bid-box h3 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 32px;
      font-weight: 300;
      color: var(--white);
      margin-bottom: 8px;
    }
    .bid-box p {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 20px;
      line-height: 1.6;
    }
    .bid-input {
      width: 100%;
      padding: 14px 16px;
      background: var(--panel);
      border: 1px solid var(--border-bright);
      border-radius: 2px;
      color: var(--text);
      font-size: 16px;
      font-family: 'DM Sans', sans-serif;
      outline: none;
      margin-bottom: 12px;
      transition: border-color 0.2s;
    }
    .bid-input:focus { border-color: var(--gold); }

    /* ===== MPESA MODAL ===== */
    .mpesa-modal-wrap {
      position: fixed;
      inset: 0;
      z-index: 500;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: rgba(5,4,3,0.9);
      backdrop-filter: blur(8px);
    }
    .mpesa-modal-wrap.open { display: flex; }
    .mpesa-box {
      background: var(--surface);
      border: 1px solid var(--border-bright);
      border-radius: 4px;
      padding: 36px;
      width: min(100%, 380px);
      animation: modalIn 0.3s ease;
    }
    .mpesa-box h3 {
      font-family: 'Cinzel', serif;
      font-size: 18px;
      letter-spacing: 0.1em;
      color: #00B140;
      margin-bottom: 20px;
    }
    .mpesa-box input {
      width: 100%;
      padding: 14px;
      background: var(--panel);
      border: 1px solid var(--border-bright);
      border-radius: 2px;
      color: var(--text);
      font-size: 16px;
      font-family: 'DM Sans', sans-serif;
      outline: none;
      margin-bottom: 8px;
    }
    .mpesa-box input:focus { border-color: #00B140; }
    .mpesa-hint { font-size: 11px; color: var(--muted); margin-bottom: 16px; }

    /* ===== TOAST ===== */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(80px);
      background: var(--panel);
      border: 1px solid var(--border-bright);
      color: var(--cream);
      padding: 12px 24px;
      border-radius: 4px;
      font-size: 13px;
      letter-spacing: 0.05em;
      z-index: 1000;
      transition: transform 0.35s cubic-bezier(0.34,1.2,0.64,1);
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      white-space: nowrap;
    }
    .toast.show { transform: translateX(-50%) translateY(0); }

    /* ===== ABOUT STRIP ===== */
    .about-strip {
      padding: 80px 0;
      border-top: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }
    .about-strip::before {
      content: '';
      position: absolute;
      top: -200px; left: 50%;
      width: 600px; height: 400px;
      background: radial-gradient(ellipse, rgba(201,168,76,0.06), transparent 70%);
      transform: translateX(-50%);
      pointer-events: none;
    }
    .about-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      align-items: center;
    }
    @media (max-width: 768px) { .about-grid { grid-template-columns: 1fr; } }
    .about-facts {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1px;
      background: var(--border);
      border: 1px solid var(--border);
      border-radius: 4px;
      overflow: hidden;
    }
    .fact-box {
      background: var(--surface);
      padding: 28px;
    }
    .fact-num {
      font-family: 'Cormorant Garamond', serif;
      font-size: 52px;
      font-weight: 300;
      color: var(--gold-light);
      line-height: 1;
      margin-bottom: 6px;
    }
    .fact-desc {
      font-size: 12px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .about-text h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 48px;
      font-weight: 300;
      color: var(--white);
      line-height: 1.1;
      margin-bottom: 20px;
    }
    .about-text p {
      font-size: 15px;
      line-height: 1.8;
      color: var(--muted);
      margin-bottom: 16px;
    }

    /* ===== FOOTER ===== */
    footer {
      border-top: 1px solid var(--border);
      padding: 40px 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      flex-wrap: wrap;
    }
    .footer-logo {
      font-family: 'Cinzel', serif;
      font-size: 14px;
      letter-spacing: 0.15em;
      color: var(--gold);
    }
    .footer-copy {
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.05em;
    }

    /* ===== PAGE LOAD ANIMATION ===== */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-up {
      opacity: 0;
      animation: fadeUp 0.8s cubic-bezier(0.25,0.46,0.45,0.94) forwards;
    }
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.25s; }
    .delay-3 { animation-delay: 0.4s; }
    .delay-4 { animation-delay: 0.55s; }
    .delay-5 { animation-delay: 0.7s; }

    /* SCROLLBAR */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: var(--ink); }
    ::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.3); border-radius: 2px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(201,168,76,0.6); }

    @media (max-width: 768px) {
      .nav { padding: 0 20px; }
      .filter-bar { gap: 8px; }
      .search-field { min-width: 160px; }
      .about-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<!-- ==================== NAVBAR ==================== -->
<nav class="nav" id="nav">
  <div class="nav-inner">
    <a href="#" class="brand">
      <div class="brand-logo">Late Night Epiphanies</div>
      <div class="brand-sub">Midnight Art by Samuel Adikah</div>
    </a>
    <div class="nav-center">
      <a href="#gallery" class="nav-link">Collection</a>
      <a href="#about" class="nav-link">About</a>
      <button class="nav-link" id="commissionNavBtn">Commission</button>
    </div>
    <div class="nav-actions">
      <a href="about.html" class="pill-btn" style="font-size:11px; padding:8px 16px;">About</a>
      <button class="icon-btn" id="cartBtn" aria-label="Open cart">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 6h13l-1.3 8.4a2 2 0 01-2 1.6H9.1a2 2 0 01-2-1.6L6 6zm0 0L5 3H3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><circle cx="9" cy="20" r="1.5" fill="currentColor"/><circle cx="17" cy="20" r="1.5" fill="currentColor"/></svg>
        <span class="cart-badge" id="cartBadge">0</span>
      </button>
    </div>
  </div>
</nav>

<!-- ==================== HERO ==================== -->
<section class="hero">
  <div class="hero-bg">
    <div class="hero-bg-glow g1"></div>
    <div class="hero-bg-glow g2"></div>
    <div class="hero-lines"></div>
  </div>
  <div class="hero-inner">
    <div>
      <div class="hero-eyebrow fade-up delay-1">New Collection 2026</div>
      <h1 class="fade-up delay-2">Art that feels<br>like <em>3AM<br>epiphanies.</em></h1>
      <p class="hero-desc fade-up delay-3">Original pencil sketches and dreamy art by Samuel Adikah, crafted in the late-night quiet. Shop ready-to-hang pieces or request a custom portrait.</p>
      <div class="hero-cta fade-up delay-4">
        <a href="#gallery" class="btn-gold">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M5 3l14 9-14 9V3z" fill="currentColor"/></svg>
          Shop Originals
        </a>
        <button class="btn-outline" id="heroCommissionBtn">Request Commission</button>
      </div>
    </div>
    <div class="hero-visual fade-up delay-5">
      <div class="hero-frame-border"></div>
      <div class="hero-frame">
        <img id="heroImg" alt="Featured artwork" src="assets/images/love5.jpg" />
        <div class="hero-frame-number">LNE · 2026 Edition</div>
      </div>
      <div class="hero-stats">
        <div class="stat-pill">
          <div class="stat-num">39</div>
          <div class="stat-label">Artworks</div>
        </div>
        <div class="stat-pill" style="margin-top:1px">
          <div class="stat-num">10</div>
          <div class="stat-label">Max prints each</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ==================== MARQUEE ==================== -->
<div class="marquee-strip">
  <div class="marquee-inner">
    <span>Original Pencil Sketches</span><span class="dot">✦</span>
    <span>Limited Editions</span><span class="dot">✦</span>
    <span>Custom Portraits</span><span class="dot">✦</span>
    <span>Midnight Series 2026</span><span class="dot">✦</span>
    <span>Hand-Signed Prints</span><span class="dot">✦</span>
    <span>Archival Paper</span><span class="dot">✦</span>
    <span>Free Worldwide Shipping</span><span class="dot">✦</span>
    <span>Original Pencil Sketches</span><span class="dot">✦</span>
    <span>Limited Editions</span><span class="dot">✦</span>
    <span>Custom Portraits</span><span class="dot">✦</span>
    <span>Midnight Series 2026</span><span class="dot">✦</span>
    <span>Hand-Signed Prints</span><span class="dot">✦</span>
    <span>Archival Paper</span><span class="dot">✦</span>
    <span>Free Worldwide Shipping</span><span class="dot">✦</span>
  </div>
</div>

<!-- ==================== GALLERY ==================== -->
<section class="filter-section container" id="gallery">
  <div class="section-header">
    <div>
      <div class="section-eyebrow">The Collection</div>
      <h2 class="section-title">Original <em>Works</em></h2>
    </div>
  </div>
  <div class="filter-bar">
    <span class="filter-label">Filter</span>
    <button class="filter-chip active" data-filter="all">All Works</button>
    <button class="filter-chip" data-filter="Sketch">Sketch</button>
    <button class="filter-chip" data-filter="Portrait">Portrait</button>
    <button class="filter-chip" data-filter="Abstract">Abstract</button>
    <div class="filter-spacer"></div>
    <div class="search-field">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" opacity="0.5"><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="1.5"/><path d="M20 20l-3.5-3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      <input id="searchInput" type="search" placeholder="Search artworks…" />
    </div>
    <select class="sort-select" id="sortSelect">
      <option value="default">Featured</option>
      <option value="price-asc">Price: Low → High</option>
      <option value="price-desc">Price: High → Low</option>
    </select>
  </div>
  <main class="gallery" id="galleryGrid" aria-live="polite"></main>
</section>

<!-- ==================== ABOUT STRIP ==================== -->
<section class="about-strip container" id="about">
  <div class="about-grid">
    <div class="about-text">
      <div class="section-eyebrow">The Artist</div>
      <h2>Samuel<br><em>Adikah</em></h2>
      <p>Each piece is born in the quiet of late night — graphite on archival paper, no digital editing. The silence lets raw emotion flow freely.</p>
      <p>Every artwork is produced in a maximum run of 10 signed prints. Once sold out, the piece is retired forever. This keeps each work rare and personal.</p>
      <button class="btn-gold" style="margin-top: 8px" id="aboutCommissionBtn">
        Commission a Piece →
      </button>
    </div>
    <div class="about-facts">
      <div class="fact-box">
        <div class="fact-num">39</div>
        <div class="fact-desc">Original Works</div>
      </div>
      <div class="fact-box">
        <div class="fact-num">10</div>
        <div class="fact-desc">Max Prints</div>
      </div>
      <div class="fact-box">
        <div class="fact-num">3am</div>
        <div class="fact-desc">Creative Hour</div>
      </div>
      <div class="fact-box">
        <div class="fact-num">∞</div>
        <div class="fact-desc">Epiphanies</div>
      </div>
    </div>
  </div>
</section>

<!-- ==================== FOOTER ==================== -->
<footer class="container">
  <div class="footer-logo">Late Night Epiphanies</div>
  <div class="footer-copy">© <span id="year"></span> Samuel Adikah. All rights reserved.</div>
</footer>

<!-- ==================== QUICK VIEW MODAL ==================== -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal">
    <button class="modal-close" id="modalClose">✕</button>
    <div class="modal-grid">
      <div class="modal-img-panel">
        <img id="modalImg" alt="Artwork" />
      </div>
      <div class="modal-info">
        <div>
          <div class="modal-cat" id="modalCat"></div>
          <h2 class="modal-title" id="modalTitle"></h2>
        </div>
        <p class="modal-desc" id="modalDesc"></p>
        <div>
          <div class="opt-label">Size</div>
          <div class="opt-row" id="sizeRow"></div>
        </div>
        <div>
          <div class="opt-label">Finish</div>
          <div class="opt-row" id="finishRow"></div>
        </div>
        <div class="modal-price" id="modalPrice">KSh 0</div>
        <div class="modal-actions">
          <button class="btn-gold btn-full" id="modalAddCart">Add to Cart</button>
          <button class="btn-wish" id="modalWish" title="Add to wishlist">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 21C12 21 3 13.5 3 8a5 5 0 019-3 5 5 0 019 3c0 5.5-9 13-9 13z" stroke="currentColor" stroke-width="1.5"/></svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ==================== BID MODAL ==================== -->
<div class="bid-modal-wrap" id="bidModalWrap">
  <div class="bid-box">
    <button class="modal-close" style="position:relative;top:0;right:0;float:right;margin-bottom:16px" id="bidClose">✕</button>
    <h3>Place Your Bid</h3>
    <p id="bidProductName" style="color:var(--gold); font-family:'Cormorant Garamond',serif; font-size:20px; margin-bottom:8px;"></p>
    <p>Enter your bid amount (KSh). Must exceed current listed price.</p>
    <input class="bid-input" type="number" id="bidAmountInput" placeholder="e.g. 55,000" min="1000" />
    <button class="btn-gold btn-full" id="bidSubmit">Place Bid →</button>
  </div>
</div>

<!-- ==================== MPESA MODAL ==================== -->
<div class="mpesa-modal-wrap" id="mpesaModalWrap">
  <div class="mpesa-box">
    <button class="modal-close" style="position:relative;top:0;right:0;float:right;margin-bottom:16px" id="mpesaClose">✕</button>
    <h3>Pay with M-Pesa</h3>
    <input type="tel" id="mpesaPhone" placeholder="254712345678" pattern="254[7-9][0-9]{8}" />
    <p class="mpesa-hint">Format: 2547XXXXXXXX (e.g. 254708374149)</p>
    <button class="btn-mpesa" id="mpesaSubmit">Send STK Push</button>
  </div>
</div>

<!-- ==================== CART DRAWER ==================== -->
<div class="drawer-backdrop" id="drawerBackdrop"></div>
<aside class="cart-drawer" id="cartDrawer">
  <div class="cart-header">
    <h2>Your Cart</h2>
    <button class="icon-btn" id="cartDrawerClose" style="border-radius:2px">✕</button>
  </div>
  <div class="cart-body" id="cartBody"></div>
  <div class="cart-footer">
    <div class="cart-total-row">
      <span class="cart-total-label">Total</span>
      <span class="cart-total-value" id="cartTotal">KSh 0</span>
    </div>
    <button class="btn-gold btn-full" id="checkoutBtn">Checkout via Email</button>
    <button class="btn-mpesa" id="mpesaPayBtn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M12 2L2 7v10c0 5.55 4.48 8.78 10 12 5.52-3.22 10-6.45 10-12V7l-10-5z"/></svg>
      Pay with M-Pesa
    </button>
    <p class="cart-note">Confirmed via WhatsApp / Email</p>
  </div>
</aside>

<div class="toast" id="toast"></div>

<!-- ==================== SCRIPT ==================== -->
<script>
  const products = [
    { id:'p1', title:'Love Dream I', category:'Portrait', tags:['romance','bw'], priceBase:42000, img:'assets/images/love5.jpg', desc:'Romantic midnight sketch in pencil.' },
    { id:'p2', title:'Dark Forest', category:'Sketch', tags:['dreamy','soft'], priceBase:25000, img:'assets/images/NATURE ART6.jpg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p3', title:'Ocean Wave', category:'Abstract', tags:['surreal','thoughts'], priceBase:52000, img:'assets/images/NATURE ART4.jpg', desc:'Surreal abstraction inspired by late-night epiphanies.' },
    { id:'p4', title:'Floating Girl', category:'Sketch', tags:['raw','expressive'], priceBase:50000, img:'assets/images/NATURE ART5.jpg', desc:'Expressive raw strokes, part of the Love series.', sold:true },
    { id:'p5', title:'The Bridge', category:'Portrait', tags:['romance','bw'], priceBase:42000, img:'assets/images/NATURE ART2.jpg', desc:'Romantic midnight sketch in pencil.', sold:true },
    { id:'p6', title:'Birds on the Ocean', category:'Sketch', tags:['dreamy','soft'], priceBase:50000, img:'assets/images/NATURE ART3.jpg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p7', title:'Blue Night', category:'Sketch', tags:['dreamy','soft'], priceBase:50000, img:'assets/images/new1.jpeg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p8', title:'Moon Night', category:'Sketch', tags:['dreamy','soft'], priceBase:50000, img:'assets/images/new2.jpeg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p9', title:'Starry Night', category:'Sketch', tags:['dreamy','soft'], priceBase:50000, img:'assets/images/new3.jpeg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p10', title:'The Woods', category:'Sketch', tags:['dreamy','soft'], priceBase:50000, img:'assets/images/new4.jpeg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p11', title:'Two Kittens', category:'Sketch', tags:['dreamy','soft'], priceBase:60000, img:'assets/images/new6.jpeg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p12', title:'Star Gaze', category:'Sketch', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/new7.jpeg', desc:'A dreamy late-night drawing, soft and textured.', sold:true },
    { id:'p13', title:'Update 1', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update 1.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p14', title:'Update 2', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update 2.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p15', title:'Update 3', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update3.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p16', title:'Update 4', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update4.jpeg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p17', title:'Update 5', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update5.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p18', title:'Update 6', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update6.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p19', title:'Update 7', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update7.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p20', title:'Update 8', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update8.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p21', title:'Update 9', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update9.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p22', title:'Update 10', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update10.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p23', title:'Update 11', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update11.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p24', title:'Update 12', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/update12.webp', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p25', title:'Update 13', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a1.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p26', title:'Update 14', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a2.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p27', title:'Update 15', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a3.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p28', title:'Update 16', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a4.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p29', title:'Update 17', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a5.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p30', title:'Update 18', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a6.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p31', title:'Update 19', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a7.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p32', title:'Update 20', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a8.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p33', title:'Update 21', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a9.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p34', title:'Update 22', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a10.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p35', title:'Update 23', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a11.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p36', title:'Update 24', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a12.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p37', title:'Update 25', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a13.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p38', title:'Update 26', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a14.jpg', desc:'A dreamy late-night drawing, soft and textured.' },
    { id:'p39', title:'Update 27', category:'Portrait', tags:['dreamy','soft'], priceBase:70000, img:'assets/images/a15.jpg', desc:'A dreamy late-night drawing, soft and textured.' }
  ];

  const KES = v => `KSh ${v.toLocaleString('en-KE')}`;
  const cart = JSON.parse(localStorage.getItem('lnp_cart') || '[]');
  const favs = new Set(JSON.parse(localStorage.getItem('lnp_favs') || '[]'));
  const saveCart = () => localStorage.setItem('lnp_cart', JSON.stringify(cart));
  const saveFavs = () => localStorage.setItem('lnp_favs', JSON.stringify([...favs]));

  let currentProduct = null, currentSize = 'A4', currentFinish = 'Unframed';
  const sizeDelta = { A5:0, A4:0, A3:1200, A2:2900 };
  const finishDelta = { Unframed:0, Framed:1800 };
  const computePrice = p => p.priceBase + (sizeDelta[currentSize]||0) + (finishDelta[currentFinish]||0);

  function svgPlaceholder(title) {
    const s = `<svg xmlns='http://www.w3.org/2000/svg' width='800' height='1000'><rect width='100%' height='100%' fill='%231e1c14'/><text x='50' y='500' font-family='serif' font-size='48' fill='%23c9a84c' opacity='.6'>${title.replace(/&/g,'&amp;')}</text></svg>`;
    return 'data:image/svg+xml;utf8,' + encodeURIComponent(s);
  }

  // GALLERY RENDER
  const galleryEl = document.getElementById('galleryGrid');
  function renderGallery(list) {
    galleryEl.innerHTML = '';
    list.forEach(p => {
      const card = document.createElement('article');
      card.className = 'art-card' + (p.sold ? ' sold' : '');
      card.innerHTML = `
        <div class="art-img-wrap">
          <img src="${p.img || svgPlaceholder(p.title)}" alt="${p.title}" loading="lazy" />
          <div class="art-overlay">
            <div class="overlay-btns">
              <button class="overlay-btn primary" data-action="add" data-id="${p.id}">Add to Cart</button>
              <button class="overlay-btn secondary" data-action="view" data-id="${p.id}">Quick View</button>
              <button class="overlay-btn bid-btn" data-action="bid" data-id="${p.id}" title="Place a bid">⚡</button>
            </div>
          </div>
          <div class="art-cat-badge">${p.category}</div>
          ${p.sold ? '<div class="sold-banner">Sold</div>' : ''}
        </div>
        <div class="art-card-body">
          <div class="art-title">${p.title}</div>
          <div class="art-tags">${p.tags.map(t=>'#'+t).join(' ')}</div>
          <div class="art-price-row">
            <div class="art-price">${KES(p.priceBase)}</div>
          </div>
        </div>`;
      galleryEl.appendChild(card);
    });
    const featured = list.find(p=>!p.sold);
    if (featured) document.getElementById('heroImg').src = featured.img || svgPlaceholder(featured.title);
  }

  // FILTERS
  document.querySelectorAll('.filter-chip').forEach(chip => {
    chip.addEventListener('click', () => {
      document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
      applyFilters();
    });
  });
  document.getElementById('searchInput').addEventListener('input', applyFilters);
  document.getElementById('sortSelect').addEventListener('change', applyFilters);

  function applyFilters() {
    const active = document.querySelector('.filter-chip.active').dataset.filter;
    const q = document.getElementById('searchInput').value.trim().toLowerCase();
    const sortVal = document.getElementById('sortSelect').value;
    let list = products.filter(p => active === 'all' || p.category === active);
    if (q) list = list.filter(p => (p.title + ' ' + p.tags.join(' ')).toLowerCase().includes(q));
    if (sortVal === 'price-asc') list.sort((a,b) => a.priceBase - b.priceBase);
    if (sortVal === 'price-desc') list.sort((a,b) => b.priceBase - a.priceBase);
    renderGallery(list);
  }

  // GALLERY CLICK DELEGATION
  galleryEl.addEventListener('click', e => {
    const btn = e.target.closest('[data-action]');
    if (!btn) return;
    const p = products.find(x => x.id === btn.dataset.id);
    if (!p || p.sold) return;
    if (btn.dataset.action === 'view') openModal(p);
    if (btn.dataset.action === 'add') { addToCart(p); toast('Added to cart ✓'); }
    if (btn.dataset.action === 'bid') openBid(p);
  });

  // QUICK VIEW MODAL
  const modalBackdrop = document.getElementById('modalBackdrop');
  function openModal(p) {
    currentProduct = p;
    currentSize = 'A4';
    currentFinish = 'Unframed';
    document.getElementById('modalImg').src = p.img || svgPlaceholder(p.title);
    document.getElementById('modalCat').textContent = p.category;
    document.getElementById('modalTitle').textContent = p.title;
    document.getElementById('modalDesc').textContent = p.desc;
    buildOpts();
    updateModalPrice();
    modalBackdrop.classList.add('open');
    document.getElementById('modalWish').classList.toggle('active', favs.has(p.id));
  }
  function closeModal() { modalBackdrop.classList.remove('open'); }
  document.getElementById('modalClose').addEventListener('click', closeModal);
  modalBackdrop.addEventListener('click', e => { if (e.target === modalBackdrop) closeModal(); });

  function buildOpts() {
    const sizeRow = document.getElementById('sizeRow');
    const finishRow = document.getElementById('finishRow');
    sizeRow.innerHTML = ''; finishRow.innerHTML = '';
    ['A5','A4','A3','A2'].forEach(s => sizeRow.appendChild(makeOpt(s,'size', s==='A4')));
    ['Unframed','Framed'].forEach(f => finishRow.appendChild(makeOpt(f,'finish', f==='Unframed')));
  }
  function makeOpt(val, group, active) {
    const el = document.createElement('button');
    el.className = 'opt-chip' + (active ? ' active' : '');
    el.textContent = val;
    el.dataset.group = group;
    el.addEventListener('click', () => {
      document.querySelectorAll(`.opt-chip[data-group="${group}"]`).forEach(c => c.classList.remove('active'));
      el.classList.add('active');
      if (group === 'size') currentSize = val;
      else currentFinish = val;
      updateModalPrice();
    });
    return el;
  }
  function updateModalPrice() {
    document.getElementById('modalPrice').textContent = KES(computePrice(currentProduct));
  }
  document.getElementById('modalAddCart').addEventListener('click', () => {
    if (!currentProduct || currentProduct.sold) return;
    addToCart(currentProduct, currentSize, currentFinish);
    closeModal();
    toast('Added to cart ✓');
  });
  document.getElementById('modalWish').addEventListener('click', () => {
    if (!currentProduct) return;
    if (favs.has(currentProduct.id)) favs.delete(currentProduct.id);
    else favs.add(currentProduct.id);
    saveFavs();
    document.getElementById('modalWish').classList.toggle('active', favs.has(currentProduct.id));
    toast(favs.has(currentProduct.id) ? '♥ Saved to wishlist' : 'Removed from wishlist');
  });

  // CART
  function addToCart(p, size='A4', finish='Unframed') {
    const key = `${p.id}-${size}-${finish}`;
    const ex = cart.find(i => i.key === key);
    if (ex) ex.qty += 1;
    else cart.push({ key, id:p.id, title:p.title, size, finish,
      price: p.priceBase + (sizeDelta[size]||0) + (finishDelta[finish]||0),
      img: p.img || svgPlaceholder(p.title), qty:1 });
    saveCart(); renderCart(); updateBadge();
  }
  function changeQty(key, delta) {
    const i = cart.find(x => x.key === key);
    if (!i) return;
    i.qty += delta;
    if (i.qty <= 0) cart.splice(cart.indexOf(i), 1);
    saveCart(); renderCart(); updateBadge();
  }
  function updateBadge() {
    const total = cart.reduce((a,i) => a + i.qty, 0);
    const badge = document.getElementById('cartBadge');
    badge.textContent = total;
    badge.classList.toggle('visible', total > 0);
  }
  function renderCart() {
    const body = document.getElementById('cartBody');
    body.innerHTML = '';
    let subtotal = 0;
    if (cart.length === 0) {
      body.innerHTML = `<div class="empty-cart">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none"><path d="M6 6h13l-1.3 8.4a2 2 0 01-2 1.6H9.1a2 2 0 01-2-1.6L6 6zm0 0L5 3H3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="9" cy="20" r="1.5" fill="currentColor" opacity=".5"/><circle cx="17" cy="20" r="1.5" fill="currentColor" opacity=".5"/></svg>
        <p>Your cart is empty</p>
      </div>`;
    }
    cart.forEach(i => {
      subtotal += i.price * i.qty;
      const row = document.createElement('div');
      row.className = 'cart-item';
      row.innerHTML = `
        <img src="${i.img}" alt="${i.title}" />
        <div>
          <div class="cart-item-title">${i.title}</div>
          <div class="cart-item-meta">${i.size} · ${i.finish}</div>
          <div class="cart-item-price">${KES(i.price)}</div>
        </div>
        <div class="qty-control">
          <button class="qty-btn" data-k="${i.key}" data-d="1">+</button>
          <span class="qty-num">${i.qty}</span>
          <button class="qty-btn" data-k="${i.key}" data-d="-1">−</button>
        </div>`;
      body.appendChild(row);
    });
    document.getElementById('cartTotal').textContent = KES(subtotal);
  }
  document.getElementById('cartBody').addEventListener('click', e => {
    const btn = e.target.closest('[data-k]');
    if (!btn) return;
    changeQty(btn.dataset.k, parseInt(btn.dataset.d));
  });

  // CART DRAWER
  const cartDrawer = document.getElementById('cartDrawer');
  const drawerBackdrop = document.getElementById('drawerBackdrop');
  function openCart() { cartDrawer.classList.add('open'); drawerBackdrop.classList.add('open'); }
  function closeCartDrawer() { cartDrawer.classList.remove('open'); drawerBackdrop.classList.remove('open'); }
  document.getElementById('cartBtn').addEventListener('click', openCart);
  document.getElementById('cartDrawerClose').addEventListener('click', closeCartDrawer);
  drawerBackdrop.addEventListener('click', closeCartDrawer);

  // CHECKOUT
  document.getElementById('checkoutBtn').addEventListener('click', () => {
    if (!cart.length) { toast('Your cart is empty'); return; }
    const lines = cart.map(i=>`${i.qty}× ${i.title} (${i.size}, ${i.finish}) — ${KES(i.price*i.qty)}`).join('%0A');
    const total = document.getElementById('cartTotal').textContent;
    const msg = `Hello Samuel,%0A%0AOrder:%0A${lines}%0A%0ATotal: ${total}%0A%0AName:%0APhone:%0AEmail:%0ADelivery:`;
    window.location.href = `mailto:samsmollett50@gmail.com?subject=Order — Late Night Epiphanies&body=${msg}`;
  });

  // COMMISSION
  function openCommission() {
    const body = encodeURIComponent(`Hello Samuel,\n\nI'd like to commission a piece.\n\nIdea:\nSize:\nDeadline:\nBudget:`);
    window.location.href = `mailto:samsmollett50@gmail.com?subject=Commission — Late Night Epiphanies&body=${body}`;
  }
  ['commissionNavBtn','heroCommissionBtn','aboutCommissionBtn'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.addEventListener('click', openCommission);
  });

  // BID MODAL
  const bidWrap = document.getElementById('bidModalWrap');
  let bidProduct = null;
  function openBid(p) {
    bidProduct = p;
    document.getElementById('bidProductName').textContent = p.title;
    document.getElementById('bidAmountInput').value = '';
    bidWrap.classList.add('open');
  }
  document.getElementById('bidClose').addEventListener('click', () => bidWrap.classList.remove('open'));
  bidWrap.addEventListener('click', e => { if (e.target === bidWrap) bidWrap.classList.remove('open'); });
  document.getElementById('bidSubmit').addEventListener('click', () => {
    const amt = parseInt(document.getElementById('bidAmountInput').value);
    if (!amt || amt < 1000) { toast('Enter a valid bid (min KSh 1,000)'); return; }
    if (amt <= bidProduct.priceBase) { toast(`Bid must exceed ${KES(bidProduct.priceBase)}`); return; }
    bidWrap.classList.remove('open');
    toast('✓ Bid placed successfully!');
  });

  // MPESA
  const mpesaWrap = document.getElementById('mpesaModalWrap');
  document.getElementById('mpesaPayBtn').addEventListener('click', () => {
    if (!cart.length) { toast('Cart is empty'); return; }
    mpesaWrap.classList.add('open');
  });
  document.getElementById('mpesaClose').addEventListener('click', () => mpesaWrap.classList.remove('open'));
  mpesaWrap.addEventListener('click', e => { if (e.target === mpesaWrap) mpesaWrap.classList.remove('open'); });
  document.getElementById('mpesaSubmit').addEventListener('click', async () => {
    const phone = document.getElementById('mpesaPhone').value.trim();
    const amount = parseInt(document.getElementById('cartTotal').textContent.replace(/[^\d]/g,''));
    if (!/^254[7-9][0-9]{8}$/.test(phone)) { toast('Invalid phone. Use 2547XXXXXXXX'); return; }
    const btn = document.getElementById('mpesaSubmit');
    btn.textContent = 'Sending…';
    btn.disabled = true;
    try {
      const res = await fetch('https://art-mpesa-backend.onrender.com/api/pay', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ phone, amount })
      });
      const data = await res.json();
      if (data.success) { toast('✓ STK Push sent! Check your phone.'); mpesaWrap.classList.remove('open'); }
      else toast(data.error || 'Payment failed');
    } catch { toast('Network error. Try again.'); }
    finally { btn.textContent = 'Send STK Push'; btn.disabled = false; }
  });

  // TOAST
  const toastEl = document.getElementById('toast');
  let toastTimer;
  function toast(msg) {
    toastEl.textContent = msg;
    toastEl.classList.add('show');
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toastEl.classList.remove('show'), 2200);
  }

  // NAVBAR SCROLL EFFECT
  window.addEventListener('scroll', () => {
    document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 60);
  });

  // INIT
  document.getElementById('year').textContent = new Date().getFullYear();
  renderGallery(products);
  renderCart();
  updateBadge();
</script>
</body>
</html>

